<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.beetmall.sshj.admin.dao.AdminBoardDAO">
 	<select id="noticeBoardList" resultType="com.beetmall.sshj.admin.vo.AdminBoardVO">
 		select * from(
	    	select * from(
 				select infonum, infotype, infotitle, to_char(infowritedate, 'YY/MM/DD') infowritedate from notice order by infonum desc
			)
			where <![CDATA[rownum<=]]>${pageNum}*${onePageRecord} order by infonum)
			where <![CDATA[rownum<=]]><if test="pageNum==totalPage">${lastPageRecord}</if>
        							  <if test="pageNum!=totalPage">${onePageRecord}</if>
        order by infonum desc
 	</select>
 	<insert id="noticeWriteOk" parameterType="com.beetmall.sshj.admin.vo.AdminBoardVO">
 		insert into notice(infonum, infotitle, infowritedate, infoattach, infocontent, infotype) values(noticesq.nextval, #{infotitle}, sysdate, #{infoattach}, #{infocontent}, #{infotype})
 	</insert>
 	<select id="noticeBoardView" resultType="com.beetmall.sshj.admin.vo.AdminBoardVO">
 		select infonum, infotitle, infowritedate, infoattach, infocontent, infotype from notice where infonum=#{param1}
 	</select> 
 	<update id="noticeBoardEditOk" parameterType="com.beetmall.sshj.admin.vo.AdminBoardVO">
 		update notice set infocontent=#{infocontent}, infotitle=#{infotitle}, infotype=#{infotype}, infoattach=#{infoattach} where infonum=#{infonum} 
 	</update>
	<delete id="noticeBoardDelete">
		delete from notice where infonum=#{param1}
	</delete>
</mapper>