<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.beetmall.sshj.seller.dao.SellerIntroFarmDAO">
	<select id="selectInfo" resultType="com.beetmall.sshj.seller.vo.SellerIntroFarmVO">
		select * from (
            select storenum, farmname, farmprofile, farmvisitor, d.productnum productnum, farmintro, userid, storename, sellername, sellerreginum,
                    sellerregiimg, regiapproval, regiapprovaldate, storezipcode, storeaddr, storedetailaddr, storeemail, bank, bankname,
                    bankaccount, saleprice from 
                (select a.storenum storenum, farmname, farmprofile, farmvisitor, productnum, farmintro, userid, storename, sellername, sellerreginum,
                    sellerregiimg, regiapproval, regiapprovaldate, storezipcode, storeaddr, storedetailaddr, storeemail, bank, bankname,
                    bankaccount from farm a join 
                    (select * from seller where userid=#{userid}) b on a.storenum = b.storenum
            ) c join discount d on c.productnum = d.productnum 
        ) e join product f on e.productnum = f.productnum
	</select>
	<select id="selectFavorite" resultType="int">
		select count(userid) storenum from favorite where storenum=(select storenum from seller where userid='${userid}')
	</select>
</mapper>